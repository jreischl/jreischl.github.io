<div class="contents">
    <div class="d-flex">
      <button type="button" class="btn btn-link mr-4 p-0 d-block d-lg-none" data-action="back_to_plan"><span class="sr-only">Back</span><span aria-hidden="true"><i class="icon-arrow-left3"></i></span></button>
      <h1 class="heading mb-0 flex-fill"><strong id="collection_heading"> Workouts</strong></h1><a class="btn btn-primary rounded-pill btn-sm" href="workout-builder.html">New Workout <small class="icon-plus"></small></a>
    </div>
    <form class="my-4">
      <div class="d-flex mt-4 mb-2">
        <div class="dropdown">
          <button class="btn btn-secondary dropdown-toggle mr-2" type="button" id="selected_catalog" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> My Workouts </button>
          <div class="dropdown-menu" aria-labelledby="selected_catalog">
            <button class="dropdown-item" type="button" data-action="change_collection" data-collection="client">Client Workouts</button>
            <button class="dropdown-item" type="button" data-action="change_collection" data-collection="mine">My Workouts</button>
            <button class="dropdown-item" type="button" data-action="change_collection" data-collection="received">Received Workouts</button>
            <button class="dropdown-item" type="button" data-action="change_collection" data-collection="system">System Workouts</button>
          </div>
        </div>
        <input id="search_workouts" class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
        <button class="btn btn-secondary" type="button" data-toggle="collapse" data-target="#advanced_workout_filters" aria-expanded="false" aria-controls="advanced_workout_filters"><i class="icon-filter"></i> <span class="sr-only">Filters</span></button>
      </div>
      <div id="advanced_workout_filters" class="collapse" style="">
        <div class="d-flex justify-content-end p-1 bg-secondary rounded">
          <div class="form-group mr-2">
            <label for="filter_product" class="d-block"><small>Product</small></label>
            <input type="text" id="filter_product" class="form-control typeahead tt-query form-control-sm" autocomplete="off" spellcheck="false">
          </div>
          <div class="form-group">
            <div class="mr-2">
              <label for="select_program"><small>Program</small></label>
              <select class="form-control form-control-sm" id="select_program">
                <option value="client">Level 1</option>
                <option value="all">Level 2 </option>
              </select>
            </div>
          </div>
          <div class="form-group">
            <div class="mr-2">
              <label for="select_workout"><small>Workout</small></label>
              <select class="form-control form-control-sm" id="select_workout">
                <option value="1">Workout 1</option>
                <option value="2">Workout 2 </option>
                <option value="3">Workout 3 </option>
                <option value="4">Workout 4 </option>
                <option value="5">Workout 5 </option>
                <option value="6">Workout 6 </option>
              </select>
            </div>
          </div>
        </div>
      </div>
      <div class="form-group">
        <div id="filter_workouts" class="">
          <label for="all_equipment" class="small mr-2">
            <input id="all_equipment" type="checkbox" checked="" data-toggle="collapse" data-target="#filters_equipment" aria-expanded="false" role="button">
            All Equipment</label>
          <div id="filters_equipment" class="collapse"><span class="d-flex flex-wrap"></span>
            <hr>
          </div>
          <label for="all_bodyparts" class="small">
            <input id="all_bodyparts" type="checkbox" checked="" data-toggle="collapse" data-target="#filters_bodyparts" aria-expanded="false" role="button">
            All Body Parts</label>
          <div id="filters_bodyparts" class="collapse"><span class="d-flex flex-wrap"></span>
            <hr>
          </div>
        </div>
      </div>
    </form>
    <ul id="Workouts-Library" class="list-unstyled list-items list-ruled">
    </ul>
    <p data-noresults style="display: none">No matching workouts.</p>
    <!--				<div data-collection="favorites">You can select "Add to Favorites" on any System or Custom workout and it will appear here.</div>--> 
	<button data-action="cancel_add_task" class="btn btn-secondary btn-block" type="button">Cancel</button>
  </div>


<script>
 $(function () {  

	  
	// Load Workouts
	  $.getJSON('js/workouts.json', function(data) {
       $.each(data.mine, function(i, f) {
		    var workoutItem = '<li data-collection="mine" data-status="'+ f.status +'"><div class="m-2 plan-day d-flex flex-grow-1 align-items-center"><button class="btn btn-sm btn-primary icon-plus p-2 mr-4" data-action="add_existing_to_plan"><span class="sr-only">Add to Workout</span></button><i class="thumbnail populated" style="background-image: url(https://pumpone.com/static_images/320/'+ f.poster +'.jpg)"></i><div class="d-flex flex-column flex-fill"><span class="workout-name">'+ f.name +' </span><small>'+ f.exercises +' Exercises, '+ f.duration +', '+ f.energy +'</small></div><a href="#thisPlan" class="icon-point-right p-2 ml-2 btn btn-link btn-takeover"  data-action="view_workout_detail"></a></div></li>'			  
           $(workoutItem).appendTo("#Workouts-Library");
	   });
       $.each(data.workout, function(i, f) {
          var workoutItem = '<li data-collection="system" data-status="'+ f.status +'"><div class="m-2 plan-day d-flex flex-grow-1 align-items-center"><button class="btn btn-sm btn-primary icon-plus p-2 mr-4" data-action="add_existing_to_plan"><span class="sr-only">Add to Workout</span></button><i class="thumbnail populated" style="background-image: url(https://pumpone.com/static_images/320/'+ f.poster +'.jpg)"></i><div class="d-flex flex-column flex-fill"><span class="workout-name">'+ f.name +' </span><small>'+ f.exercises +' Exercises, '+ f.duration +', '+ f.energy +'</small></div><a href="#thisPlan" class="icon-point-right p-2 ml-2 btn btn-link btn-takeover"  data-action="view_workout_detail"></a></div></li>'			  
           $(workoutItem).appendTo("#Workouts-Library");
		   	   
		   
		   // Remove broken image path
		   $( "#Workouts-Library i[style*='/.jpg']" ).css( "background-image", "" ).removeClass('populated');


		   
		   
		   // Search Workouts 
			$('#search_workouts').keyup(function() {
			  $('#Workouts-Library [data-collection]').hide();
			  var txt = $('#search_workouts').val();
			  $('#Workouts-Library [data-collection]').each(function() {
				if ($(this).text().toUpperCase().indexOf(txt.toUpperCase()) != -1) {
				  $(this).show();
				}
			  });
			});

		   
     });
		  
		
		// Show Workout Detail		  

		$('[data-action="view_workout_detail"]').click(function(){
			
			var theCollect = $(this).parent().parent('li');
			var theWorkout = $(this).prev().children('.workout-name').html();
			var theWOPoster = $(this).siblings('.populated').css('background-image');
			
			if ($(theCollect).attr('data-collection') == 'custom' ){
				$('[data-action="edit_workout"]').show();
			}
			else {
				$('[data-action="edit_workout"]').show();
			}						


			$('#workout_name').html(theWorkout);
			$(this).closest('li').addClass('indicate').siblings('li').removeClass('indicate');

			$('[data-roll]').attr('data-roll','absent');
			$('#page-library #wall_Inventory').attr('data-roll', 'minimal');
	
			$(this).closest('li').addClass('indicate');
			$(this).closest('section').attr('data-roll','present').siblings('#wall_Overview').attr('data-roll','engaged');
			$('.poster').addClass('populated').css('background-image', theWOPoster);
			$('button[data-action="back_to_workouts"]').show();
			
			
			// Draft/Publish UI
			/*
			if ($(theCollect).attr('data-status') == 'draft' ){
				$('[data-action="publish"]').show();
				$('[data-action="unpublish"]').hide();
				$('#wall_Overview #workout_name .badge').removeClass('badge-success').addClass('badge-warning')
			}
			else {
				$('[data-action="unpublish"]').show();
				$('[data-action="publish"]').hide();
				$('#wall_Overview #workout_name .badge').addClass('badge-success').removeClass('badge-warning')
			}
			
			
			$('[data-action="publish"]').click(function(){
				$(this).hide().siblings('[data-action="unpublish"]').show();
				$('#wall_Overview #workout_name .badge').addClass('badge-success').removeClass('badge-warning').text('published');
				$('#Workouts-Library .indicate').attr('data-status', 'published');
			});
			$('[data-action="unpublish"]').click(function(){
				$(this).hide().siblings('[data-action="publish"]').show();
				$('#wall_Overview #workout_name .badge').removeClass('badge-success').addClass('badge-warning').text('draft');
				$('#Workouts-Library .indicate').attr('data-status', 'draft').find('.badge').text('draft');
			})

			*/
	
			

		});
		  
		  
		  // Close Exercises 
		  $('[data-action="close_exercises"]').click(function(){
			$('#wall_Overview').attr('data-roll','absent'); 
			   $('[data-roll="present"]').attr('data-roll','engaged');
		  })
		  
		  // Close Workout Detail
		  $('[data-action="back_to_workouts"]').click(function(){
			 $('[data-roll]').attr('data-roll','absent');
			  $('#wall_Inventory').attr('data-roll','engaged');
			  $(this).addClass('d-sm-none');
			  $('#Workouts-Library .indicate').removeClass('indicate')
		  });
		  	
		
  
		  
		  
	// Close Exercise Detail
	  $('[data-action="back_to_library"]').click(function(){
 		   $('[data-action="back_to_library"]').hide();
		  $('#wall_Overview .item-exercise ').show();
		  $('.item-exercise.detail').removeClass('detail');
		   $('#wall_Overview').removeClass('view-exercise');
		  $(this).addClass('d-sm-none');
	  });
	  
	   
	   
   });
	
		//  Load Filters

   $.getJSON('js/filters.json', function(data) {
       $.each(data.equipment, function(i, f) {
          var filterChecks = '<div class="form-check my-2 mr-4"><input class="form-check-input" type="checkbox" value="" id="'+ f.id +'"><label class="form-check-label small" for="'+ f.id +'">'+ f.label +'</label></div>'			  
           $(filterChecks).appendTo("#filter_workouts #filters_equipment > span");
     });
	    $.each(data.bodypart, function(i, f) {
          var filterChecks = '<div class="form-check my-2 mr-4"><input class="form-check-input" type="checkbox" value="" id="'+ f.id +'"><label class="form-check-label small" for="'+ f.id +'">'+ f.label +'</label></div>'			  
           $(filterChecks).appendTo("#filter_workouts #filters_bodyparts > span");
     });
	   
	   
   });
 });
</script>