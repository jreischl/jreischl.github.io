<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Client Management | AF Coaching</title>
<link rel="stylesheet" href="../css/bootstrap.css">
<link rel="stylesheet" href="../css/fontawesome.css">
<link rel="stylesheet" href="../css/custom.css">
<link rel="stylesheet" href="../css/fonts.css">
<link rel="stylesheet" href="css/coaching.css">

<!-- Page Specific-->
<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<link rel="stylesheet" href="css/react-wysiwyg.css">
<style>
	
	
@media (max-width: 767px) {
	#footer { 
		display: none; /* Hide the footer on mobile chat */
	}	
	
}
	
.nav-tabs .nav-link.active, .nav-tabs .nav-item.show .nav-link {
    background-color: transparent;
}
	
	[data-roll="present"] [data-action="view_client"]{
		display: none;
	}
	

	
	/* Hide the stats unless the Client list is engaged */
	#wall_Clients[data-roll="present"] [data-stats] {
		display: none!important;
	}
	
	
	.mug-md {
		height: 3em;
		min-width: 3em;
		max-width: 3em;
		border-radius: 100%;
	}
#wall_Detail {
}
	
		#wall_Detail [data-action="switch_to_chat"] {
			display: none;

		}
	@media (max-width: 991px) {
		#wall_Detail [data-action="switch_to_chat"] {
			display: inherit;

		}
	}
	
	#manage_coach,
	#wall_Clients nav {
		display: none;
	}
	
	.incoming_msg_img {
		display: none;
	}
	
	
	.carousel-sm .carousel-control-prev, .carousel-sm .carousel-control-next {
				color: inherit;
		width: 2rem;
	}
	.carousel-sm .carousel-inner {
		padding: .25rem 2rem;
		line-height: 1rem;
	}
	
	.carousel-sm .carousel-control-prev-icon, .carousel-sm .carousel-control-next-icon {
		height: 1rem;
		width: 1rem;

	}
	.carousel-sm .carousel-indicators {
		margin-bottom: 0;
	}
	.carousel-sm .carousel-indicators li {
		border: none;
	}
	
</style>
</head>
<body class="d-md-flex">
<header id="header" data-role="header"></header>
<nav id="navbar" class="sidebar"></nav>
<main class="container-relative d-md-flex align-items-stretch  bg-gray-lightest" id="clients_library">
  <section id="wall_Clients" class="flex-fill p-sm-3 bg-white" data-roll="minimal" style="overflow-x: hidden; max-height: calc(100vh - 4rem);">
    <div class="d-flex flex-wrap justify-content-between align-items-center">
      <h1 class="h4 mr-2 flex-fill h-xs-6"><strong>MY&nbsp;CLIENTS</strong></h1>

		  <div><button class="btn btn-link"><i class="icon-search"></i> </button>
		  <button class="btn btn-link"><i class="icon-filter"></i> </button>
			  </div>

    </div>
    <div class="contents">
		<div class="d-flex d-minimal-none justify-content-between">
	
      
      
			</div>
      <div id="no_results" class="text-center p4" style="display: none"> No matching clients. </div>
      <ul id="clients_list" class="list-unstyled list-items list-ruled d-flex d-md-block mb-0">
      </ul>
    </div>
	  <nav aria-label="..." class="d-minimal-none">
  <ul class="pagination pagination-sm">
    <li class="page-item disabled">
      <a class="page-link" href="#" tabindex="-1" aria-disabled="true">Previous</a>
    </li>
    <li class="page-item"><a class="page-link" href="#">1</a></li>
    <li class="page-item active" aria-current="page">
      <a class="page-link" href="#">2 <span class="sr-only">(current)</span></a>
    </li>
    <li class="page-item"><a class="page-link" href="#">3</a></li>
    <li class="page-item">
      <a class="page-link" href="#">Next</a>
    </li>
  </ul>
</nav>
  </section>

  <section id="wall_Chat" class="py-3 bg-white border-left " data-roll="engaged" style="overflow: hidden; max-height: calc(100vh - 4rem);">
	  
	  
	  
    <div class="d-flex align-items-center justify-content-between px-3 "> 
		
		<div id="floating-client-id" class="d-flex align-items-center flex-fill "><span><i class="mug mug-md mr-2 position-relative" style="background-image: url(//randomuser.me/api/portraits/men/13.jpg)"></i></span><div class="d-flex flex-column flex-fill "><h1 class="heading m-0 nowrap" ><strong data-name="">Charles Atlas</strong></h1>
			<small class="text-muted">Last active 2 min ago</small>
		
			</div></div>

		
      <button type="button" class="btn btn-secondary rounded-pill d-lg-none" data-action="view_client"><span class=""></span> <i class="icon-person-fill" aria-hidden="true"></i> <span class="sr-only">Profile</span></button>
		
		<button type="button" class="btn btn-link btn-xl" data-action="launch_video_chat" style="font-size: 2rem; text-decoration: none;"> <i class="icon-video-chat" aria-hidden="true"></i> <span class="sr-only">Video Chat</span></button>
    </div>
	  
	  <div  id="carousel_goals"  class="carousel carousel-sm slide bg-secondary m-2 rounded" data-ride="carousel" data-interval="false">
		   <ol class="carousel-indicators">
    <li data-target="#carousel_goals" data-slide-to="0" class="active"></li>
    <li data-target="#carousel_goals" data-slide-to="1"></li>
  </ol>
		  <div class="carousel-inner">
    <div class="carousel-item active">
			  <small class="text-muted"><em><strong>This Week's Goal</strong><br>Limit alcohol comsumption to the weekend</em></small>
			  </div>
			<div class="carousel-item">
				<small class="text-muted"><em><strong>Long Term Goal</strong><br>Lose weight and have more energy</em></small>
				
			  
			  </div>
	  </div>
		  
		  <a class="carousel-control-prev" href="#carousel_goals" role="button" data-slide="prev">
    <span class="icon-arrow-left" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="carousel-control-next" href="#carousel_goals" role="button" data-slide="next">
    <span class="icon-arrow-right" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
		  
	  </div>
	  

	  
	  
    <div class="mesgs ">
      <div class="msg_history">
        <div class="incoming_msg">
          <div class="incoming_msg_img"> <i class="mug mug-md mr-2" style="background-image: url(//randomuser.me/api/portraits/men/13.jpg)"></i> </div>
          <div class="received_msg">
            <div class="received_withd_msg">
              <p>This is the first thing the client said to their coach</p>
              <span class="time_date"> 11:01 AM    |    June 9</span></div>
          </div>
        </div>
        <div class="outgoing_msg">
          <div class="sent_msg">
            <p>This is how the coach responded to their client </p>
            <span class="time_date"> 11:01 AM    |    June 9</span> </div>
        </div>
        <div class="incoming_msg">
          <div class="incoming_msg_img"> <i class="mug mug-md mr-2" style="background-image: url(//randomuser.me/api/portraits/men/13.jpg)"></i> </div>
          <div class="received_msg">
            <div class="received_withd_msg">
              <p>Then the client said this</p>
              <span class="time_date"> 11:01 AM    |    Yesterday</span></div>
          </div>
        </div>
        <div class="outgoing_msg">
          <div class="sent_msg">
            <p>And the coach said this</p>
            <span class="time_date"> 11:01 AM    |    Today</span> </div>
        </div>
        <div class=" mb-4">
          <div class=" chat-injection">
            <div class="border py-2 px-1 rounded-pill"> <i class="icon-workouts rounded-circle bg-gray p-2 mr-2"></i> <small>Total Body: Level 1: Foundation: Workout 1</small> </div>
            <span class="time_date"> 11:01 AM    |    Today</span> </div>
        </div>
        <div class="incoming_msg">
          <div class="incoming_msg_img"> <i class="mug mug-md mr-2" style="background-image: url(//randomuser.me/api/portraits/men/13.jpg)"></i> </div>
          <div class="received_msg">
            <div class="received_withd_msg">
              <p>And the client responded with such verbosity that it wrapped to multiple lines which allowed us to see what that looks like</p>
              <span class="time_date"> 11:01 AM    |    Today</span></div>
          </div>
        </div>
      </div>
      <div class="type_msg">
        <div class="input_msg_write d-flex align-items-center justify-content-between">
          <button type="button" class="btn btn-sm btn-secondary mr-2" data-toggle="modal" data-target="#attachment_modal"><i class="icon-attachment"></i><span class="sr-only">Attachment</span></button>
          <label class="sr-only" for="msg-input">Message input</label>
          <input id="msg-input" type="text" class="write_msg" placeholder="Type a message" />
          <button class="msg_send_btn" type="button"><i class="icon-send" aria-hidden="true"></i></button>
        </div>
      </div>
    </div>
 
  </section>
  <section id="wall_Detail" class="flex-fill pl-lg-3 py-3 bg-gray-lightest border-left" data-roll="present" style="overflow: auto; max-height: calc(100vh - 4rem);">

  </section>
</main>
<aside>
</aside>
<footer id="footer"></footer>
<script src="../js/jquery-3.3.1.min.js"></script> 
<script src="../js/popper.min.js"></script> 
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script> 
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script><!-- required for Datepicker--> 

<script src="js/coaching.js"></script> 
<script src="../js/jquery.ui.touch-punch.min.js"></script> 

<!--Graph --> 
<script src="js/jquery.canvasjs.min.js"></script> 
<script>

 $(function () {
	 
	 
	 // Display screens based on URL parameter
/*    if ( document.location.href.indexOf('?detail') > -1 ) {
		
		$('#wall_Clients').attr('data-roll','minimal');
		$('#wall_Detail').attr('data-roll','present');
		$('[data-action="view_client"]').hide();
		
								
	}
	 */
	 

	 
	 
	 // Load Clients
	   $.getJSON('js/clients.json', function(data) {
		   $.each(data.client, function(i, f) {
			  var clientItem = '<li class="position-relative" data-club="'+ f.club +'" data-coach="'+ f.coach +'" data-plan="'+ f.plan +'" data-week="'+ f.plan_week +'"><div class="m-2 d-flex flex-grow-1 align-items-center"><i class="mug mug-md mr-sm-2 position-relative" style="background-image: url(//randomuser.me/api/portraits/'+ f.gen +'/'+ f.id +'.jpg)"></i><div class="d-none d-sm-flex flex-column flex-fill"><span data-name>'+ f.first_name +' '+ f.last_name +'</span><small class="text-muted"><span data-type="msg">'+ f.msg +'</small><small data-type="plan" class="text-muted d-none">'+ f.plan +''+ f.plan_week +'</small></div></div> <button class="p-0 btn btn-link btn-takeover" data-action="view_client_chat"><span class="sr-only">View Detail</span> </button></li>'			  
			   $(clientItem).appendTo("#clients_list");
			});
		   
		   // Search Clients 
			$('#search_clients').keyup(function() {
			  $('#clients_list > li').hide();
			  var txt = $('#search_clients').val();
			  $('#clients_list > li').each(function() {
				if ($(this).text().toUpperCase().indexOf(txt.toUpperCase()) != -1) {
				  $(this).show();
				  $('#no_results').hide();
				}
			   else if($('#clients_list > li').children(':visible').length == 0) {
				   // action when all are hidden
				   $('#no_results').show();

				}
			  });
			});
		   
		   // Indicate first client 
		    $('#clients_list > li:first-child').addClass('indicate');
		   
		   // Give client an unread chat 
		   
		   $('#clients_list > li:first-child .mug').append('<span class="badge badge-pill badge-danger position-absolute" style="bottom: -3px;right: -5px;border: 2px solid;">2</span>');

		   $('#clients_list > li:first-child [data-name]').css('font-weight','600')
		   
		   
		   
		  

		   //  Populate Coach Name & Adjust members vs clients 
		   $('#clients_list li').each(function(){
			   var theCoachName = $(this).find('[data-coach-name]');
			   
			   if (!$(theCoachName).text().trim().length){
				   $(this).attr('data-status','member')
				  $(theCoachName).remove();
				}
			   else {
				   $(theCoachName).before('<strong>Coach<br></strong>');
				   $(this).attr('data-status','client')
			   }
		   });
	   
   	  	   // Filter Clients 
		   $('[data-action="filter_plan"]').click(function(){			   
			   var thePlan = $(this).text()
			   if ($(this).is('#all_plans')) {
				   $('#clients_list li').show().addClass('filtered');
			   }
			   else if ($(this).is('#no_plans')) {
				   $('#clients_list li').hide().removeClass('filtered');
				   $('[data-plan=""]').show().addClass('filtered');	
			   }
			   else {				  
				   $('#clients_list li').hide().removeClass('filtered');
				   $('[data-plan="'+thePlan+'"]').show().addClass('filtered');				   
			   }
			   $('[data-action="filter_plan"]').removeClass('checked')
			   $(this).addClass('checked');
			   $('#selected_plan').text(thePlan);
		   });
		    // Filter Weeks 
		   $('[data-action="filter_week"]').click(function(){
			   if ($(this).is('#all_weeks')) {
				   $('#selected_week').text('All Weeks');
				   $('li.filtered').show();
			   }
			   else {
				   var theWeek = $(this).attr('data-week');
				   $('#clients_list li').hide();
				   $('[data-week="'+theWeek+'"].filtered').show();
				   $('#selected_week').text('Week '+theWeek);
			   }			  
			   $('[data-action="filter_week"]').removeClass('checked')
			   $(this).addClass('checked');			   			   
		   })
		   
		   		   
		 // Replace empty plan with CTA
//		 $('[data-type="plan"]:empty').parent().html('');
		   
		   	
		   
		 // Stage the list based on a club, status and coach
		   $('#clients_list > li').hide();
		   $('#clients_list [data-coach="1"] [data-coach-name]').text('Jon Reischl (Me)')
   		   $('#clients_list [data-coach="2"] [data-coach-name]').text('Phyllis Saroka')
		   $('#clients_list > li[data-club="2515"]').addClass('selected-club');
		   $('#clients_list > li[data-coach="1"]').addClass('selected-coach');
		   $('#clients_list > li.selected-club.selected-coach').show();
		   
		   
		 // Club Selector 
		   
		   $('#select_club').change(function(){
			   var theClub = $('#select_club option:selected').val();
			   $('#clients_list > li').hide().removeClass('selected-club');;
			   $('#clients_list > li[data-club='+theClub+']').addClass('selected-club');
			   $('#clients_list > li.selected-club.selected-coach').show();
			   
			   
		   });
		   
		   
		    // Coach Selector 
		   
		   $('#select_coach').change(function(){
			   var thisCoach = $('#select_coach option:selected').val();			   
			   $('#clients_list > li').hide().removeClass('selected-coach');
			   $('#clients_list > li[data-coach='+thisCoach+']').addClass('selected-coach');
			   $('#clients_list > li.selected-club.selected-coach').show();			   
		   });
		   
		   
		   // Status (client v member) Selector 
		   
		   $('#select_member_status').change(function(){
			   var theStatus = $('#select_member_status option:selected').val();
			   
			   if ($(this).val() == 'all') {
				   $('#clients_list > li.selected-club').show().removeClass('selected-status');
				   $('#select_coach').parent().hide();
				   
			   }
			   else {
				   $('#clients_list > li.selected-club').hide().removeClass('selected-status');
				   $('#clients_list > li.selected-club.selected-coach[data-status='+theStatus+']').show().addClass('selected-status');
				   $('#select_coach').parent().show();
			   }
			   
		   });
		   
		   
		   	 // View Client
	 
			 $('[data-action="view_client"]').click(function(){
				 
				 $('#wall_Clients').attr('data-roll', 'minimal');
				 $('#wall_Chat').attr('data-roll', 'present');
				 $('#wall_Detail').attr('data-roll', 'engaged');
				 
		//		 $('[data-action="back_to_clients"]').attr( "style", "display: inherit !important;" )				 			

			 });
		   
		    // View Chat
	 
			 $('[data-action="switch_to_chat"]').click(function(){
				 
				 $('#wall_Chat').attr('data-roll', 'engaged');
				 $('#wall_Detail').attr('data-roll', 'present');
				 
			 });
		   
		   
		   
		   	 // View Client Chat (obsolete)
	 
			 $('[data-action="view_client_chat"]').click(function(){

				 var theName = $(this).siblings().find('[data-name]').text();
				 var theCoach = $(this).siblings().find('[data-coach-name]');
				 var theCoachText = $(theCoach).text();
				 var theMug = $(this).siblings().find('.mug').css('background-image');
				 var thePlan = $(this).siblings().find('[data-type="plan"]');
				 var thePlanText = $(thePlan).text();
				 
				 

				 $('#clients_list li').removeClass('indicate');
				 $(this).closest('li').addClass('indicate')
				 $('#wall_Clients').attr('data-roll', 'minimal');
				 $('#wall_Chat').attr('data-roll', 'enganged');
				 $('#wall_Detail').attr('data-roll', 'present');
				 
				 if ($(this).parent().is('[data-coach="1"]')) {
					 $('#wall_Detail [data-proprietary]').show();
				 }
				 else {
					 $('#wall_Detail [data-proprietary]').hide();
				 }

				 $('#wall_Detail [data-name]').text(theName);
				 $('#wall_Chat [data-name]').text(theName);
				 
				 // If there isn't a coach, show full Assign Coach button
				 if ($(theCoach).length === 0) {			 
					 $('#wall_Detail [data-coach]').text('').siblings('button').text('Assign Coach');
				 }
				 else {
					 $('#wall_Detail [data-coach]').text(theCoachText).siblings('button').html('<i class="icon-pencil-stub"></i> <span class="sr-only">Assign Coach</span>');
				 }
				 $('#wall_Detail .mug').css('background-image', theMug);
				 $('#wall_Chat .mug').css('background-image', theMug);
				 
				 // If there are plans assigned, include the manage button for each plan
				 if ($(thePlan).length === 0) {
//					  $('#wall_Detail [data-plans] > li').text('')
					 $('[data-target="#planAssignmentModal"]').addClass('btn-primary');
				 }
				 else {
					 $('#wall_Detail [data-plans] > li').text(thePlanText).prepend('<button class="icon-x-small btn btn-secondary btn-sm" data-toggle="modal" data-target="#managePlanConf"></button> ');
				 }
				 
				 // Back to Chat
				 
				  $('[data-action="back_to_chat"]').click(function(){
						 $('#wall_Detail').attr('data-roll', 'absent');
					  	 $('#wall_Chat').attr('data-roll', 'engaged');
					  	$('#wall_Clients').attr('data-roll', 'present');
			
					 })

				 // Back to Client List 
				 $('[data-action="back_to_clients"]').click(function(){
					 $(this).attr('style','');
					 $('[data-roll]').attr('data-roll', 'absent');
					 $('#wall_Clients').attr('data-roll', 'engaged');
				 })



			 });

		   
	   });
	 

	 
	  // Load Client Detail 
	 
	 $('#wall_Detail').load('includes/client_detail_rev.html');
 

	 // Date Picker 
	 $( "#scan-datepicker1" ).datepicker();
	 $( "#scan-datepicker2" ).datepicker();
	 
	 $('#note-datepicker1').datepicker();
	 $('#task-datepicker').datepicker();
	 // Fake WYSIWYG
	 $('#fake_wysiwyg').load("includes/fake_wysiwyg.html")
	 
	 
	 $(function () {
		  $('[data-toggle="tooltip"]').tooltip();
		 
		 
		 	 $('[href="#tab_overview"]').click(function(){
		$('#client_tabs').hide();
	})
		 
		 
		});
	 
	 

	 $('[data-action="launch_video_chat"]').click(function(){
		 var left  = ($(window).width() / 2) - (900 / 2),
    top   = ($(window).height() / 2) - (600 / 2),
    popup = window.open("video_chat.html", "popup", "width=1200, height=860, top=" + top + ", left=" + left);
		 
	 })
		
	 	 
 });
	

</script>
</body>
</html>




